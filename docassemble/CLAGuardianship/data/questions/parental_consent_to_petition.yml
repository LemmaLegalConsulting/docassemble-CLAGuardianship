---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_notarized_waiver_and_consent
code: |
  # Set the allowed courts for this interview
  allowed_courts = ['Probate and Family Court']
  parental_consent_to_petition
  parents.gather()
  who_is_making_petition
  interested_person_relationship
  children[0].name.first
  children[0].birthdate
  trial_court
  docket_number
  requested_guardians.gather() 
  temporary_guardianship_duration
  permanent_guardianship_duration
  child_support_obligation
---
id: interested_person_relationship
question: |
  Who agrees to this petition?
fields:
  - Select each person who agrees to the petition: 
  - no label: interested_person_relationship
---
id: minor info
sets:
  - children[0].name.first
  - children[0].name.last
  - children[0].name.middle
  - children[0].name.suffix
  - children[0].address.address
  - children[0].address.unit
  - children[0].address.city
  - children[0].address.state
  - children[0].address.zip
  - children[0].address.country
question: |
  Who is the minor in this case?
fields:
  - code: |
      children[0].name_fields()
  - code: |
      children[0].address_fields(country_code=AL_DEFAULT_COUNTRY, default_state=AL_DEFAULT_STATE, show_country=False)
---
id: minor birthdate
question: |
  When was ${ children[0].name } born?
fields:
  - Birthdate: children[0].birthdate
    datatype: Birthdate
---
sets:
  - requested_guardians[i].name.first
  - requested_guardians[i].name.last
  - requested_guardians[i].name.middle
  - requested_guardians[i].name.suffix
id: names of opposing parties
question: |
  Who are you requesting to be appointed as the child's ${ ordinal(i) } guardian(s)?
fields:
  - code: |
      requested_guardians[i].name_fields()
---
code: |
  if len(requested_guardians.complete_elements()) >= 2:
     requested_guardians.there_is_another = False

---
id: temporary_guardianship_duration
question: |
  Do you understand that if the court appoints a temporary guardian, the guardianship will initially last for 90 days and can be extended for additional 90 day periods if needed?
fields:
  no label: temporary_guardianship_duration
  datatype: yesnoradio
---
id: permanent_guardianship_duration
question: |
  Do you understand that if the court appoints a permanent guardian, the guardianship will continue until the child reaches 18 years old, gets married, or the court terminates the guardianship?
fields:
  no label: permanent_guardianship_duration
  datatype: yesnoradio
---
id: child_support_obligation
question: |
  Do you understand that if the court appoints a temporary or permanent guardian, you may still be required to pay child support if you were already legally obligated to do so?
fields:
  no label: child_support_obligation
  datatype: yesnoradio
---
id: Signing the Consent Form
question: |
  Are you the child's parent or legal guardian?
fields:
  no label: Verification
  datatype: yesnoradio

---
# ALDocument objects specify the metadata for each template
objects:
  - parental_consent_to_petition_attachment: ALDocument.using(title="Parental Consent to Guardianship (MPC 440)", filename="parental_consent_to_petition", enabled=True, has_addendum=False, )
---
attachment:
  - name: Notarized Waiver and Consent
    filename: Notarized Waiver and Consent
    variable name: parental_consent_to_petition_attachment[i]
    skip undefined: True
    pdf template file: parental_consent_to_petition.pdf
    fields:
      - "docket_number__1": ${docket_number}
      - "trial_court_division": ${ trial_court.division }
      - "children1_name_first__1": ${ children[0].name.first }
      - "children1_name_middle__1": ${ children[0].name.middle }
      - "children1_name_last__1": ${ children[0].name.last }
      - "user_is_mother": ${ True if who_is_making_petition == 'mother' else False  }
      - "interested_person_relationship": ${interested_person_relationship}
      - "user_is_father": ${ True if who_is_making_petition == 'father' else False  }
      - "user_is_interested_person": ${ True if who_is_making_petition == 'interested_party' else False  }
      - "guardians1_name_first": ${ requested_guardians[0].name.first }
      - "guardians1_name_middle_initial": ${ requested_guardians[0].name.middle_initial() }
      - "guardians1_name_last": ${ requested_guardians[0].name.last }
      - "guardians2_name_middle_initial": ${ requested_guardians[1].name.middle_initial() }
      - "guardians2_name_first": ${ requested_guardians[1].name.first }
      - "guardians2_name_last": ${ requested_guardians[1].name.last }
      - "parents1_name_full": |
          ${ parents[0].name if who_is_making_petition == 'father' or who_is_making_petition == 'interested_party'  else "" }
      - "parents1_address_address": ${ parents[0].address.address if who_is_making_petition == 'father' or who_is_making_petition == 'interested_party'  else "" }
      - "parents1_address_unit": ${ parents[0].address.unit if who_is_making_petition == 'father' or who_is_making_petition == 'interested_party'  else "" }
      - "parents1_address_city": ${ parents[1].address.city if who_is_making_petition == 'father' or who_is_making_petition == 'interested_party'  else "" }
      - "parents1_address_state": ${ parents[0].address.state if who_is_making_petition == 'father' or who_is_making_petition == 'interested_party'  else "" }
      - "parents1_address_zip": ${ parents[0].address.zip if who_is_making_petition == 'father' or who_is_making_petition == 'interested_party'  else "" }
      - "parents2_name_full": ${ parents[1].name if who_is_making_petition == 'mother' or who_is_making_petition == 'interested_party'  else "" }
      - "parents2_address_address": ${ parents[1].address.address if who_is_making_petition == 'mother' or who_is_making_petition == 'interested_party'  else "" }
      - "parents2_address_unit": ${ parents[1].address.unit if who_is_making_petition == 'mother' or who_is_making_petition == 'interested_party'  else "" }
      - "parents2_address_city": ${ parents[1].address.city if who_is_making_petition == 'mother' or who_is_making_petition == 'interested_party'  else "" }
      - "parents2_address_state": ${ parents[1].address.state if who_is_making_petition == 'mother' or who_is_making_petition == 'interested_party'  else "" }
      - "parents2_address_zip": ${ parents[1].address.zip if who_is_making_petition == 'mother' or who_is_making_petition == 'interested_party'  else "" }
      - "parents1_signature_date": ${ today() if who_is_making_petition == 'father' or who_is_making_petition == 'interested_party'  else "" }
      - "parents2_signature_date": ${ today() if who_is_making_petition == 'mother' or who_is_making_petition == 'interested_party'  else "" }
      - "users1_name_full": ${parents[0].name}
      - "children1_name_first__2": ${ children[0].name.first }
      - "children1_name_middle__2": ${ children[0].name.middle }
      - "children1_name_last__2": ${ children[0].name.last }
      - "docket_number__2": ${docket_number}
      - "users2_name_full": ${parents[0].name}
